"use strict";function addressAction(e,a){var r=a.item.feature,t=r.geometry.coordinates[0],s=r.geometry.coordinates[1];map.setView([s,t],12),marker&&map.removeLayer(marker),marker=L.marker([s,t]).addTo(map),marker.bindPopup(r.properties.address).openPopup()}function addressSource(e,a){var r=e.term.replace(/[^0-9a-zA-Z ]/g,"");if(0==r.length)return void response([]);var t=viewparamsToStr({query:r}),s={service:"WFS",version:"2.0.0",request:"GetFeature",typeName:"gnaf:address_search",outputFormat:"application/json",srsname:"EPSG:4326",viewparams:t};$.ajax({url:url,data:s,type:"GET",dataType:"json",success:function(e,r,t){for(var s=[],o=e.features.length-1;o>=0;o--){var p=e.features[o];s.push({label:p.properties.address,value:p.properties.address,feature:p})}a(s)}})}function viewparamsToStr(e){var a="";return $.each(e,function(e,r){a.length&&(a+=";"),a+=e+":"+r}),a}L.Icon.Default.imagePath="./scripts/images",$("#searchclear").click(function(){$("#searchinput").val("")});var map=L.map("map").setView([-27.29368,134.12109],4),hereMaps=L.tileLayer.provider("HERE.terrainDay",{app_id:"0wCRmjJq9GwLTuaWPCao",app_code:"bhOAcQk5lyWeAvuleaUyjg"}).addTo(map),url="http://gnaf.agl.pw/geoserver/ows?";$("#searchbox .typeahead").autocomplete({minLength:1,source:addressSource,select:addressAction});var marker=null;